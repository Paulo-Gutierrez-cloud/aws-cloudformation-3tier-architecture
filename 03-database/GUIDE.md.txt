üîå Gu√≠a Completa: Conectar EC2 a RDS MySQL
Prerequisitos
Antes de comenzar, aseg√∫rate de tener:

‚úÖ Stack VPC desplegado
‚úÖ Stack EC2 desplegado y funcionando
‚úÖ Stack RDS desplegado (estado: CREATE_COMPLETE)
‚úÖ DBEndpoint copiado desde CloudFormation Outputs
‚úÖ Password de RDS guardado


üìã Paso 1: Obtener el DB Endpoint

Ve a CloudFormation Console
Selecciona tu stack Lab-RDS
Click en la pesta√±a Outputs
Copia el valor de DBEndpoint

Ejemplo: lab-mysql-db.abc123xyz.us-east-1.rds.amazonaws.com




üîê Paso 2: Conectarse a tu Instancia EC2
Opci√≥n A: Usando SSH (desde tu computadora)
Para Windows (con PuTTY):
bash# Configurar PuTTY con tu archivo .ppk
# Host Name: (IP p√∫blica de tu instancia EC2)
# Connection ‚Üí SSH ‚Üí Auth ‚Üí Browse ‚Üí Seleccionar .ppk
Para macOS/Linux:
bash# Desde tu terminal local
chmod 400 lab-key.pem
ssh -i lab-key.pem ec2-user@<IP-PUBLICA-EC2>
Opci√≥n B: Usando Session Manager (sin SSH)

Ve a EC2 Console ‚Üí Instances
Selecciona tu instancia
Click en Connect ‚Üí Session Manager
Click Connect


üõ†Ô∏è Paso 3: Instalar Cliente MySQL en EC2
Una vez conectado a EC2, ejecuta:
bash# Actualizar sistema
sudo yum update -y

# Instalar cliente MySQL
sudo yum install mysql -y

# Verificar instalaci√≥n
mysql --version
Salida esperada:
mysql  Ver 15.1 Distrib 10.5.x-MariaDB, for Linux (x86_64)

üîó Paso 4: Conectarse a RDS desde EC2
M√©todo 1: Conexi√≥n B√°sica
bash# Reemplaza con tus valores reales
mysql -h lab-mysql-db.abc123xyz.us-east-1.rds.amazonaws.com \
      -P 3306 \
      -u admin \
      -p
Cuando pida password: ingresa el password que configuraste al crear el stack RDS
M√©todo 2: Usando Variables (m√°s ordenado)
bash# Definir variables
export DB_HOST="lab-mysql-db.abc123xyz.us-east-1.rds.amazonaws.com"
export DB_USER="admin"
export DB_NAME="labdatabase"

# Conectar
mysql -h $DB_HOST -u $DB_USER -p $DB_NAME

‚úÖ Paso 5: Verificar Conexi√≥n Exitosa
Si la conexi√≥n es exitosa, ver√°s:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MySQL connection id is 10
Server version: 8.0.35 Source distribution

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MySQL [(none)]>

üß™ Paso 6: Probar la Base de Datos
Ver bases de datos disponibles
sqlSHOW DATABASES;
Salida esperada:
+--------------------+
| Database           |
+--------------------+
| information_schema |
| labdatabase        |
| mysql              |
| performance_schema |
+--------------------+
Usar la base de datos
sqlUSE labdatabase;
Crear una tabla de prueba
sqlCREATE TABLE usuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100),
    email VARCHAR(100),
    fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
Insertar datos
sqlINSERT INTO usuarios (nombre, email) VALUES 
('Juan P√©rez', 'juan@example.com'),
('Mar√≠a Garc√≠a', 'maria@example.com'),
('Carlos L√≥pez', 'carlos@example.com');
Consultar datos
sqlSELECT * FROM usuarios;
Salida esperada:
+----+--------------+---------------------+---------------------+
| id | nombre       | email               | fecha_creacion      |
+----+--------------+---------------------+---------------------+
|  1 | Juan P√©rez   | juan@example.com    | 2024-10-20 10:30:00 |
|  2 | Mar√≠a Garc√≠a | maria@example.com   | 2024-10-20 10:30:01 |
|  3 | Carlos L√≥pez | carlos@example.com  | 2024-10-20 10:30:02 |
+----+--------------+---------------------+---------------------+
Salir de MySQL
sqlEXIT;